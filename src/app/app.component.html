<div id="header"> 
  <img src="assets/img/logo.svg" alt="CIN - Centro Internacional de Negócios">
  <h2>FICHA DE INSCRIÇÃO</h2>
</div>

<md-card id="content">
  <form (ngSubmit)="onSubmit()" #myForm="ngForm">
    <md-tab-group>
      <md-tab label="Empresa" ngModelGroup="company" #company="ngModelGroup" [class.teste]="!company.valid">
        <md-grid-list cols="8" rowHeight="100px">
          <md-grid-tile [colspan]="4">
            <md-input-container>
              <input mdInput type="text" placeholder="1.1 - Razão Social" 
              ngModel
              required
              name="business_name"
              #businessName="ngModel">

              <md-error *ngIf="!businessName.valid && businessName.touched">Campo obrigatório.</md-error>
            </md-input-container>
          </md-grid-tile>

          <md-grid-tile [colspan]="4">
            <md-input-container>
              <input mdInput type="text" placeholder="1.2 - Nome Fantasia"
              ngModel
              required
              name="tranding_name"
              #trandingName="ngModel">

              <md-error *ngIf="!trandingName.valid && trandingName.touched">Campo obrigatório.</md-error>
            </md-input-container>
          </md-grid-tile>
        </md-grid-list>

        <md-grid-list cols="8" rowHeight="100px">
          <md-grid-tile [colspan]="2">
            <md-input-container>
              <input mdInput type="text" placeholder="1.3 - Nome para Agenda"
              ngModel
              required
              name="schedule_name"
              #scheduleName="ngModel">

              <md-error *ngIf="!scheduleName.valid && scheduleName.touched">Campo obrigatório.</md-error>
            </md-input-container>
          </md-grid-tile>

          <md-grid-tile [colspan]="1">
            <md-input-container>
              <input mdInput type="text" placeholder="1.4 - CNPJ"
              (focusout)="receitaWsCnpj($event)"
              [textMask]="{mask: mask.cnpj}"
              ngModel
              required
              name="cnpj_number"
              #cnpjNumber="ngModel">

              <md-error *ngIf="!cnpjNumber.valid && cnpjNumber.touched">Campo obrigatório.</md-error>
            </md-input-container>
          </md-grid-tile>

          <md-grid-tile [colspan]="2">
            <md-input-container>
              <input mdInput type="text" placeholder="1.5 - Ano Fundação"
              ngModel
              name="foundation_year"
              #foundationYear="ngModel">
            </md-input-container>
          </md-grid-tile>    

          <md-grid-tile [colspan]="3">
            <md-input-container>
              <input mdInput type="text" placeholder="1.6 - Responsável Legal"
              ngModel
              name="legal_person">
            </md-input-container>
          </md-grid-tile>
        </md-grid-list>
      </md-tab>

      <md-tab label="Contato" ngModelGroup="contact" #contact="ngModelGroup" [class.teste]="!contact.valid">
        <md-grid-list cols="8" rowHeight="100px">
          <md-grid-tile [colspan]="1">
            <md-input-container>
              <input mdInput type="text" placeholder="2.1 - CEP" 
              [textMask]="{mask: mask.zip}"
              (focusout)="republicaVirtualCep($event)"
              ngModel
              name="postal_code">
            </md-input-container>
          </md-grid-tile>

          <md-grid-tile [colspan]="5">
            <md-input-container>
              <input mdInput type="text" placeholder="2.2 - Logradouro" [value]="addressObject?.logradouro"
              ngModel
              required
              name="address"
              #addressFormField="ngModel">

              <md-error *ngIf="!addressFormField.valid && addressFormField.touched">Campo obrigatório.</md-error>
            </md-input-container>
          </md-grid-tile>

          <md-grid-tile [colspan]="2">
            <md-input-container>
              <input mdInput type="text" placeholder="2.3 - Número"
              ngModel
              required
              name="number"
              #numberFormField="ngModel">

              <md-error *ngIf="!numberFormField.valid && numberFormField.touched">Campo obrigatório.</md-error>
            </md-input-container>
          </md-grid-tile>
        </md-grid-list>

        <md-grid-list cols="8" rowHeight="100px">
          <md-grid-tile [colspan]="3">
            <md-input-container>
              <input mdInput type="text" placeholder="2.4 - Cidade" [value]="addressObject?.cidade"
              ngModel
              required
              name="city"
              #cityFormField="ngModel">

              <md-error *ngIf="!cityFormField.valid && cityFormField.touched">Campo obrigatório.</md-error>
            </md-input-container>
          </md-grid-tile>

          <md-grid-tile [colspan]="1">
            <md-select placeholder="2.5 - UF"
            ngModel
            required
            name="state"
            #stateFormField="ngModel">
              <md-option *ngFor="let state of states" [value]="state.description">{{state.description}}</md-option>
            </md-select>
          </md-grid-tile>

          <md-grid-tile [colspan]="4">
            <md-input-container>
              <input mdInput type="text" placeholder="2.6 - Bairro"  [value]="addressObject?.bairro"
              ngModel
              required
              name="district"
              #districtFormField="ngModel">

              <md-error *ngIf="!districtFormField.valid && districtFormField.touched">Campo obrigatório.</md-error>
            </md-input-container>
          </md-grid-tile>
        </md-grid-list>

        <md-grid-list cols="8" rowHeight="100px">
          <md-grid-tile [colspan]="8">
            <md-input-container>
              <input mdInput type="text" placeholder="2.7 - Complemento"
              ngModel
              name="complement"
              #complement="ngModel">
            </md-input-container>
          </md-grid-tile>
        </md-grid-list>

        <md-grid-list cols="8" rowHeight="100px">
          <md-grid-tile [colspan]="2">
            <md-select placeholder="2.8 - Tipo de telefone" (change)="onChangeCompanyPhoneType($event)" id="testando">
              <md-option *ngFor="let phone of phoneType" [value]="phone.value">{{phone.description}}</md-option>
            </md-select>
          </md-grid-tile>

          <md-grid-tile [colspan]="2" *ngIf="companyPhoneTypeChanged">
            <md-input-container style="width: 90px; margin-right: 5px;">
              <input mdInput type="text" placeholder="2.8.1 - DDD" (keyup)="onChangeCompanyPhoneDDD($event)">
            </md-input-container>
            <md-input-container style="width: 110px;">
              <input mdInput type="text" placeholder="2.8.2 - Número" (keyup)="onChangeCompanyPhoneNumber($event)">
            </md-input-container>            
            <a md-mini-fab *ngIf="createContactPhoneObjectButton" (click)="createContactPhoneObject()"><md-icon color="primary">add</md-icon></a>
          </md-grid-tile>

          <md-grid-tile [colspan]="2">
            <md-input-container>
              <input mdInput type="text" placeholder="2.9 - Email" name="company_email" 
              ngModel 
              email 
              required 
              #companyEmail="ngModel">
              <md-error *ngIf="!companyEmail.valid && companyEmail.touched">Escreva um e-mail válido.</md-error>
            </md-input-container>
          </md-grid-tile>

          <md-grid-tile [colspan]="2">
            <md-input-container>
              <input mdInput type="text" placeholder="2.10 - Site" name="company_site"
              ngModel
              >
            </md-input-container>
          </md-grid-tile>
        </md-grid-list>

        <div *ngIf="companyPhoneObject.length > 0"> 
          <md-chip-list>  
            <span *ngFor="let companyPhone of companyPhoneObject; let i = index;" class="contact-phone-list">
              <md-chip>
                <span class="fs10 mr5">({{companyPhone.ddd}}){{companyPhone.number}}</span>
                <span (click)="clearContactPhone(i)"><md-icon class="fs10">clear</md-icon></span>
              </md-chip>              
            </span>
          </md-chip-list>
        </div>
      </md-tab>

      <md-tab label="Atividade" ngModelGroup="activity" #activity="ngModelGroup" [class.teste]="!activity.valid">
        <md-grid-list cols="8">
          <md-grid-tile [colspan]="2">
            <md-select placeholder="3.1 - Ramos de Atividade" name="group_id"
            multiple
            ngModel>
              <md-option *ngFor="let comercial of comercialArea" [value]="comercial.value">{{comercial.description}}</md-option>
            </md-select>
          </md-grid-tile>

          <md-grid-tile [colspan]="2">
            <md-select placeholder="3.2 - Setor" name="subgroup_id"
            (change)="filterProduct($event)"
            multiple
            ngModel>
              <md-option *ngFor="let subgroup of subgroupArea" [value]="subgroup.value">{{subgroup.description}}</md-option>
            </md-select>
          </md-grid-tile>

          <md-grid-tile [colspan]="2" *ngIf="productObject">
            <md-select placeholder="3.3 - Produtos" name="product_id"
            multiple
            ngModel>
              <md-option *ngFor="let product of productObject" [value]="product.value">{{product.description}}</md-option>
            </md-select>
          </md-grid-tile>

          <md-grid-tile [colspan]="2">
            <md-select placeholder="3.4 - Nível de Maturidade" name="maturity_level_id"
            ngModel>
              <md-option *ngFor="let maturity of maturityArea" [value]="maturity.value">{{maturity.description}}</md-option>
            </md-select>
          </md-grid-tile>
        </md-grid-list>

        <md-grid-list cols="8">
          <md-grid-tile [colspan]="4">
            <md-input-container>
              <textarea mdInput placeholder="3.5 - Eventos nacionais/internacionais que sua empresa participou" name="participation_events"
              ngModel>
              </textarea>
            </md-input-container>
          </md-grid-tile>

          <md-grid-tile [colspan]="4">
            <md-input-container>
              <textarea mdInput placeholder="3.6 - Interesses da Empresa / Observações" name="company_interests"
              ngModel>
              </textarea>
            </md-input-container>
          </md-grid-tile>
        </md-grid-list>
      </md-tab>

      <md-tab label="Mercado" ngModelGroup="market" #market="ngModelGroup" [class.teste]="!market.valid">
        <md-grid-list cols="8">
          <md-grid-tile [colspan]="4">
            <md-slide-toggle (change)="onChangeMarket($event)" color="primary">
                4 - Exportação (outros estados/países)
            </md-slide-toggle>
          </md-grid-tile>
        </md-grid-list>

        <div *ngIf="marketChanged">
          <md-grid-list cols="8">
            <md-grid-tile [colspan]="2">
              <md-select placeholder="4.1 - Outros Estados" multiple>
                <md-option *ngFor="let state of states" [value]="state.value">{{state.description}}</md-option>
              </md-select>
            </md-grid-tile>
            
            <md-grid-tile [colspan]="2">
              <md-input-container>
                <input mdInput type="text" placeholder="4.1.1 - % Faturamento">
              </md-input-container>
            </md-grid-tile>

            <md-grid-tile [colspan]="2">
              <md-select placeholder="4.2 - América do Sul" multiple>
                <md-option *ngFor="let amsul of americaSul" [value]="amsul.description">{{amsul.description}}</md-option>
              </md-select>
            </md-grid-tile>

            <md-grid-tile [colspan]="2">
              <md-input-container>
                <input mdInput type="text" placeholder="4.2.1 - % Faturamento">
              </md-input-container>
            </md-grid-tile>
          </md-grid-list>

          <md-grid-list cols="8">
            <md-grid-tile [colspan]="2">
              <md-select placeholder="4.3 - Américas do Norte e Central" multiple>
                <md-option *ngFor="let amno of americaNorte" [value]="amno.value">{{amno.description}}</md-option>
              </md-select>
            </md-grid-tile>
            
            <md-grid-tile [colspan]="2">
              <md-input-container>
                <input mdInput type="text" placeholder="4.3.1 - % Faturamento">
              </md-input-container>
            </md-grid-tile>

            <md-grid-tile [colspan]="2">
              <md-select placeholder="4.4 - África" multiple>
                <md-option *ngFor="let af of africa" [value]="af.description">{{af.description}}</md-option>
              </md-select>
            </md-grid-tile>

            <md-grid-tile [colspan]="2">
              <md-input-container>
                <input mdInput type="text" placeholder="4.4.1 - % Faturamento">
              </md-input-container>
            </md-grid-tile>
          </md-grid-list>

          <md-grid-list cols="8">
            <md-grid-tile [colspan]="2">
              <md-select placeholder="4.5 - Ásia" multiple>
                <md-option *ngFor="let asi of asia" [value]="asi.value">{{asi.description}}</md-option>
              </md-select>
            </md-grid-tile>
            
            <md-grid-tile [colspan]="2">
              <md-input-container>
                <input mdInput type="text" placeholder="4.5.1 - % Faturamento">
              </md-input-container>
            </md-grid-tile>

            <md-grid-tile [colspan]="2">
              <md-select placeholder="4.6 - Europa" multiple>
                <md-option *ngFor="let eu of europa" [value]="eu.description">{{eu.description}}</md-option>
              </md-select>
            </md-grid-tile>

            <md-grid-tile [colspan]="2">
              <md-input-container>
                <input mdInput type="text" placeholder="4.6.1 - % Faturamento">
              </md-input-container>
            </md-grid-tile>
          </md-grid-list>

          <md-grid-list cols="8">
            <md-grid-tile [colspan]="2">
              <md-select placeholder="4.7 - Oceania" multiple>
                <md-option *ngFor="let oc of oceania" [value]="oc.value">{{oc.description}}</md-option>
              </md-select>
            </md-grid-tile>
            
            <md-grid-tile [colspan]="2">
              <md-input-container>
                <input mdInput type="text" placeholder="4.7.1 - % Faturamento">
              </md-input-container>
            </md-grid-tile>

            <md-grid-tile [colspan]="2">
              <md-select placeholder="4.8 - Antártida" multiple>
                <md-option *ngFor="let an of antartida" [value]="an.description">{{an.description}}</md-option>
              </md-select>
            </md-grid-tile>

            <md-grid-tile [colspan]="2">
              <md-input-container>
                <input mdInput type="text" placeholder="4.8.1 - % Faturamento">
              </md-input-container>
            </md-grid-tile>
          </md-grid-list>
        </div>
      </md-tab>

      <md-tab label="Representantes" ngModelGroup="representative" #representative="ngModelGroup" [class.teste]="!representative.valid">
        <md-grid-list cols="8">
          <md-grid-tile [colspan]="4">
            <md-input-container>
              <input mdInput type="text" placeholder="5.1 - Nome" (keydown)="onChangeRepresentativeName($event)">
            </md-input-container>
          </md-grid-tile>

          <md-grid-tile [colspan]="2">
            <md-input-container>
              <input mdInput type="text" placeholder="5.2 - Cargo" (keydown)="onChangeRepresentativePosition($event)">
            </md-input-container>
          </md-grid-tile>

          <md-grid-tile [colspan]="2">
            <md-input-container>
              <input mdInput type="text" placeholder="5.3 - E-mail" (keydown)="onChangeRepresentativeEmail($event)">
            </md-input-container>
          </md-grid-tile>
        </md-grid-list>

        <md-grid-list cols="8">
          <!--Representative phone: start -->
          <md-grid-tile [colspan]="2">
            <md-select placeholder="5.4 - Tipo de telefone" (change)="onChangeRepresentativePhoneType($event)" id="testando">
              <md-option *ngFor="let phone of phoneType" [value]="phone.value">{{phone.description}}</md-option>
            </md-select>
          </md-grid-tile>

          <md-grid-tile [colspan]="2" *ngIf="representativePhoneTypeChanged">
            <md-input-container style="width: 90px; margin-right: 5px;">
              <input mdInput type="text" placeholder="5.4.1 - DDD" (keyup)="onChangeRepresentativePhoneDDD($event)">
            </md-input-container>
            <md-input-container style="width: 110px;">
              <input mdInput type="text" placeholder="5.4.2 - Número" (keyup)="onChangeRepresentativePhoneNumber($event)">
            </md-input-container>            
            <a md-mini-fab *ngIf="createRepresentativePhoneObjectButton" (click)="createRepresentativePhoneObject()"><md-icon color="primary">add</md-icon></a>
          </md-grid-tile>
          <!--Representative phone: end -->

          <!--Representative social media: start -->
          <md-grid-tile [colspan]="2">
            <md-select placeholder="5.5 - Mídia Social" (change)="onChangeRepresentativeSocialMediaType($event)">
              <md-option *ngFor="let socialMedia of socialMedias" [value]="socialMedia.value">{{socialMedia.description}}</md-option>
            </md-select>
          </md-grid-tile>

          <md-grid-tile [colspan]="2" *ngIf="representativeSocialMediaTypeChanged">
            <md-input-container style="width: 300px;">
              <input mdInput type="text" placeholder="5.5.1 - URL da mídia social" (keyup)="onChangeRepresentativeSocialMediaURL($event)">
            </md-input-container>            
            <a md-mini-fab *ngIf="createRepresentativeSocialMediaObjectButton" (click)="createRepresentativeSocialMediaObject()"><md-icon color="primary">add</md-icon></a>
          </md-grid-tile>
          <!--Representative social media: end -->
        </md-grid-list>

        <div *ngIf="representativePhoneObject.length > 0"> 
          <md-chip-list>  
            <span *ngFor="let representativePhone of representativePhoneObject; let i = index;" class="contact-phone-list">
              <md-chip>
                <span class="fs10 mr5">({{representativePhone.ddd}}){{representativePhone.number}}</span>
                <span (click)="clearRepresentativePhone(i)"><md-icon class="fs10">clear</md-icon></span>
              </md-chip>              
            </span>
          </md-chip-list>
        </div>

        <div *ngIf="representativeSocialMediaObject.length > 0"> 
          <md-chip-list>  
            <span *ngFor="let representativeSocialMedia of representativeSocialMediaObject; let i = index;" class="contact-phone-list">
              <md-chip>
                <span class="fs10 mr5">{{representativeSocialMedia.url}}</span>
                <span (click)="clearRepresentativeSocialMedia(i)"><md-icon class="fs10">clear</md-icon></span>
              </md-chip>              
            </span>
          </md-chip-list>
        </div>

        <div *ngIf="createRepresentativeObjectButton">
          <a md-raised-button color="primary" (click)="createRepresentativeObject()">Adicionar Representantes</a>
        </div>
      </md-tab>
    </md-tab-group>
    <md-card-actions>
      <button md-raised-button type="submit" color="primary" [disabled]="!myForm.valid">Cadastrar</button>
    </md-card-actions>
  </form>
</md-card>