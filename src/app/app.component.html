<div id="header"> 
  <img src="assets/img/logo.svg" alt="CIN - Centro Internacional de Negócios">
  <h2>FICHA DE INSCRIÇÃO</h2>
</div>

<div *ngIf="errors.length > 0">
  <md-error *ngFor="let error of errors">
    {{error.message}}
  </md-error>
</div>

<md-card id="content">
  <form (ngSubmit)="onSubmit()" [formGroup]="signupForm">
    <md-tab-group>
      <!--Vendedor: start-->
      <md-tab label="Empresa">
        <md-grid-list cols="8" rowHeight="100px">
          <md-grid-tile [colspan]="8">
            <md-radio-group>
              <md-radio-button (change)="onChangeCompanyBusiness($event)" value="1">Vendedor</md-radio-button>
              <md-radio-button (change)="onChangeCompanyBusiness($event)" value="2">Comprador</md-radio-button>
            </md-radio-group>
          </md-grid-tile>
        </md-grid-list>

        <md-grid-list cols="8" rowHeight="100px" *ngIf="companyBusiness">
          <md-grid-tile [colspan]="2">
            <md-input-container>
              <input mdInput formControlName="cnpj_number" type="text" required
              placeholder="1.1 - CNPJ"
              [textMask]="{mask: mask.cnpj}"
              (change)="receitaWsCnpj($event)">
            </md-input-container>
          </md-grid-tile>

          <md-grid-tile [colspan]="3">
            <md-input-container>
              <input mdInput formControlName="business_name" type="text" required
              placeholder="1.2 - Razão Social">
            </md-input-container>
          </md-grid-tile>

          <md-grid-tile [colspan]="3">
            <md-input-container>
              <input mdInput formControlName="tranding_name" type="text" required
              placeholder="1.3 - Nome Fantasia">
            </md-input-container>
          </md-grid-tile>
        </md-grid-list>

        <md-grid-list cols="8" rowheight="100px" *ngIf="companyBusiness">
          <md-grid-tile [colspan]="2">
            <md-input-container>
              <input mdInput formControlName="foundation_year" type="text" required
              placeholder="1.4 - Data de Abertura">
            </md-input-container>
          </md-grid-tile>

          <md-grid-tile [colspan]="2">
            <md-input-container>
              <input mdInput formControlName="employees_quantity" type="text" required
              placeholder="1.5 - Nº de Funcionários">
            </md-input-container>
          </md-grid-tile>

          <md-grid-tile [colspan]="4">
            <md-input-container>
              <input mdInput formControlName="legal_person" type="text" required
              placeholder="1.6 - Responsável Legal">
            </md-input-container>
          </md-grid-tile>
        </md-grid-list>

        <md-grid-list cols="8" rowHeight="100px" *ngIf="companyBusiness == 1">
          <div>1.7 - Porte da Empresa*</div>

          <md-grid-tile [colspan]="8">
            {{companySize}}
            <md-radio-group formControlName="company_size">
              <md-radio-button value="mei">MEI - Até R$ 60.000,00</md-radio-button>
              <md-radio-button value="micro">Microempresa - Até R$ 360.000,00</md-radio-button>
              <md-radio-button value="pequena">Pequena Empresa - R$ 360.000,00 a R$ 3.600.000,00</md-radio-button>
            </md-radio-group>
          </md-grid-tile>
        </md-grid-list>

        <md-grid-list cols="8" rowHeight="100px" *ngIf="companyBusiness == 2">
          <md-grid-tile [colspan]="4">
            <md-select placeholder="1.7 - Idiomas nos quais deseja se comunicar" formControlName="group_id"
            multiple>
              <md-option *ngFor="let language of languages" [value]="language.description">{{language.description}}</md-option>
            </md-select>
          </md-grid-tile>
        </md-grid-list>
      </md-tab>

      <md-tab label="Contatos da Empresa" *ngIf="companyBusiness == 1">
        <md-grid-list cols="8" rowHeight="100px">
          <md-grid-tile [colspan]="2">
            <md-input-container>
              <input mdInput formControlName="postal_code" type="text" required
              (change)="republicaVirtualCep($event)"
              placeholder="2.1 - CEP">
            </md-input-container>
          </md-grid-tile>

          <md-grid-tile [colspan]="4">
            <md-input-container>
              <input mdInput formControlName="address" type="text" required
              placeholder="2.2 - Logradouro">
            </md-input-container>
          </md-grid-tile>

          <md-grid-tile [colspan]="2">
            <md-input-container>
              <input mdInput formControlName="number" type="text" required
              placeholder="2.3 - Número">
            </md-input-container>
          </md-grid-tile>
        </md-grid-list>

        <md-grid-list cols="8" rowHeight="100px">
          <md-grid-tile [colspan]="3">
            <md-input-container>
              <input mdInput formControlName="district" type="text" required
              placeholder="2.4 - Bairro">
            </md-input-container>
          </md-grid-tile>

          <md-grid-tile [colspan]="3">
            <md-input-container>
              <input mdInput formControlName="city" type="text" required
              placeholder="2.5 - Município">
            </md-input-container>
          </md-grid-tile>

          <md-grid-tile [colspan]="2">
            <md-input-container>
              <input mdInput formControlName="state" type="text" required
              placeholder="2.6 - UF">
            </md-input-container>
          </md-grid-tile>
        </md-grid-list>

        <md-grid-list cols="8" rowHeight="100px">
          <md-grid-tile [colspan]="2">
            <md-select placeholder="2.7 - Tipo de telefone" formControlName="company_phone_type">
              <md-option *ngFor="let phone of phoneType" [value]="phone.value">{{phone.description}}</md-option>
            </md-select>
          </md-grid-tile>

          <md-grid-tile [colspan]="2" *ngIf="signupForm.controls['company_phone_type'].value">
            <md-input-container style="width: 90px; margin-right: 5px;">
              <input mdInput type="text" placeholder="2.7.1 - DDD" formControlName="company_phone_ddd">
            </md-input-container>
            <md-input-container style="width: 110px;">
              <input mdInput type="text" placeholder="2.7.2 - Número" formControlName="company_phone_number">
            </md-input-container>            
            <a md-mini-fab 
            *ngIf="signupForm.controls['company_phone_ddd'].value && signupForm.controls['company_phone_number'].value"
            (click)="createContactPhoneObject()">
              <md-icon color="primary">add</md-icon>
            </a>
          </md-grid-tile>

          <md-grid-tile [colspan]="2">
            <md-select placeholder="2.8 - Mídia Social" (change)="onChangeRepresentativeSocialMediaType($event)">
              <md-option *ngFor="let socialMedia of socialMedias" [value]="socialMedia.value">{{socialMedia.description}}</md-option>
            </md-select>
          </md-grid-tile>

          <md-grid-tile [colspan]="2" *ngIf="representativeSocialMediaTypeChanged">
            <md-input-container style="width: 300px;">
              <input mdInput type="text" placeholder="2.8.1 - URL da mídia social" (keyup)="onChangeRepresentativeSocialMediaURL($event)">
            </md-input-container>            
            <a md-mini-fab *ngIf="createRepresentativeSocialMediaObjectButton" (click)="createRepresentativeSocialMediaObject()">
              <md-icon color="primary">add</md-icon>
            </a>
          </md-grid-tile>
        </md-grid-list>

        <md-grid-list cols="8" rowHeight="100px">
          <md-grid-tile [colspan]="3">
            <md-input-container>
              <input mdInput formControlName="company_email" type="text" required
              placeholder="2.9 - E-mail">
            </md-input-container>
          </md-grid-tile>

          <md-grid-tile [colspan]="4">
            <md-input-container>
              <input mdInput formControlName="company_site" type="text" required
              placeholder="2.10 - Site">
            </md-input-container>
          </md-grid-tile>
        </md-grid-list>

        <div *ngIf="companyPhoneObject.length > 0"> 
          <md-chip-list>  
            <span *ngFor="let companyPhone of companyPhoneObject; let i = index;" class="contact-phone-list">
              <md-chip>
                <span class="fs10 mr5">({{companyPhone.ddd}}){{companyPhone.number}}</span>
                <span (click)="clearRepresentativePhone(i)"><md-icon class="fs10">clear</md-icon></span>
              </md-chip>              
            </span>
          </md-chip-list>
        </div>
      </md-tab>

      <md-tab label="Contatos da Empresa" *ngIf="companyBusiness == 2">
        <md-grid-list cols="8" rowHeight="100px">
          
          <md-grid-tile [colspan]="2">
            <md-input-container>
              <input mdInput formControlName="postal_code" type="text" required
              (change)="republicaVirtualCep($event)"
              placeholder="2.1 - CEP">
            </md-input-container>
          </md-grid-tile>

          <md-grid-tile [colspan]="4">
            <md-input-container>
              <input mdInput formControlName="address" type="text" required
              placeholder="2.2 - Logradouro">
            </md-input-container>
          </md-grid-tile>

          <md-grid-tile [colspan]="2">
            <md-input-container>
              <input mdInput formControlName="number" type="text" required
              placeholder="2.3 - Número">
            </md-input-container>
          </md-grid-tile>
        </md-grid-list>

        <md-grid-list cols="8" rowHeight="100px">
          <md-grid-tile [colspan]="3">
            <md-input-container>
              <input mdInput formControlName="district" type="text" required
              placeholder="2.4 - Bairro">
            </md-input-container>
          </md-grid-tile>

          <md-grid-tile [colspan]="3">
            <md-input-container>
              <input mdInput formControlName="city" type="text" required
              placeholder="2.5 - Município">
            </md-input-container>
          </md-grid-tile>

          <md-grid-tile [colspan]="2">
            <md-input-container>
              <input mdInput formControlName="state" type="text" required
              placeholder="2.6 - UF">
            </md-input-container>
          </md-grid-tile>
        </md-grid-list>

        <md-grid-list cols="8" rowHeight="100px">
          <md-grid-tile [colspan]="2">
            <md-select placeholder="2.7 - Tipo de telefone" formControlName="company_phone_type">
              <md-option *ngFor="let phone of phoneType" [value]="phone.value">{{phone.description}}</md-option>
            </md-select>
          </md-grid-tile>

          <md-grid-tile [colspan]="2" *ngIf="signupForm.controls['company_phone_type'].value">
            <md-input-container style="width: 90px; margin-right: 5px;">
              <input mdInput type="text" placeholder="2.7.1 - DDD" formControlName="company_phone_ddd">
            </md-input-container>
            <md-input-container style="width: 110px;">
              <input mdInput type="text" placeholder="2.7.2 - Número" formControlName="company_phone_number">
            </md-input-container>            
            <a md-mini-fab 
            *ngIf="signupForm.controls['company_phone_ddd'].value && signupForm.controls['company_phone_number'].value"
            (click)="createContactPhoneObject()">
              <md-icon color="primary">add</md-icon>
            </a>
          </md-grid-tile>

          <md-grid-tile [colspan]="2">
            <md-select placeholder="2.8 - Mídia Social" (change)="onChangeRepresentativeSocialMediaType($event)">
              <md-option *ngFor="let socialMedia of socialMedias" [value]="socialMedia.value">{{socialMedia.description}}</md-option>
            </md-select>
          </md-grid-tile>

          <md-grid-tile [colspan]="2" *ngIf="representativeSocialMediaTypeChanged">
            <md-input-container style="width: 300px;">
              <input mdInput type="text" placeholder="2.8.1 - URL da mídia social" (keyup)="onChangeRepresentativeSocialMediaURL($event)">
            </md-input-container>            
            <a md-mini-fab *ngIf="createRepresentativeSocialMediaObjectButton" (click)="createRepresentativeSocialMediaObject()">
              <md-icon color="primary">add</md-icon>
            </a>
          </md-grid-tile>
        </md-grid-list>

        <md-grid-list cols="8" rowHeight="100px">
          <md-grid-tile [colspan]="3">
            <md-input-container>
              <input mdInput formControlName="company_email" type="text" required
              placeholder="2.9 - E-mail">
            </md-input-container>
          </md-grid-tile>

          <md-grid-tile [colspan]="4">
            <md-input-container>
              <input mdInput formControlName="company_site" type="text" required
              placeholder="2.10 - Site">
            </md-input-container>
          </md-grid-tile>
        </md-grid-list>

        <div *ngIf="companyPhoneObject.length > 0"> 
          <md-chip-list>  
            <span *ngFor="let companyPhone of companyPhoneObject; let i = index;" class="contact-phone-list">
              <md-chip>
                <span class="fs10 mr5">({{companyPhone.ddd}}){{companyPhone.number}}</span>
                <span (click)="clearRepresentativePhone(i)"><md-icon class="fs10">clear</md-icon></span>
              </md-chip>              
            </span>
          </md-chip-list>
        </div>
      </md-tab>

      <md-tab label="Representantes" *ngIf="companyBusiness">
        <md-grid-list cols="8" rowHeight="100px">
          <md-grid-tile [colspan]="1">
            <md-select placeholder="3.1 - Título" formControlName="representative_treatment">
              <md-option *ngFor="let treatment of treatments" [value]="treatment.value">{{treatment.description}}</md-option>
            </md-select>
          </md-grid-tile>

          <md-grid-tile [colspan]="2">
            <md-input-container>
              <input mdInput type="text" 
              placeholder="3.2 - CPF" 
              formControlName="representative_cpf"
              [textMask]="{mask: mask.cpf}">
            </md-input-container>
          </md-grid-tile>

          <md-grid-tile [colspan]="2">
            <md-input-container>
              <input mdInput type="text" placeholder="3.3 - Nome" 
              formControlName="representative_name">
            </md-input-container>
          </md-grid-tile>

          <md-grid-tile [colspan]="2">
            <md-input-container>
              <input mdInput type="text" placeholder="3.4 - Cargo" 
              formControlName="representative_position">
            </md-input-container>
          </md-grid-tile>

          <md-grid-tile [colspan]="1">
            <md-input-container>
              <input mdInput placeholder="3.5 - Nascimento" 
              [textMask]="{mask: mask.date}"
              formControlName="representative_birthday">
            </md-input-container>
          </md-grid-tile>
        </md-grid-list>

        <md-grid-list cols="8" rowHeight="100px">
          <md-grid-tile [colspan]="2">
            <md-select placeholder="3.6 - Escolaridade" 
            formControlName="representative_schooling">
              <md-option *ngFor="let schoolingChoice of schooling" [value]="schoolingChoice.value">{{schoolingChoice.description}}</md-option>
            </md-select>
          </md-grid-tile>
          
          <!--Representative phone: start -->
          <md-grid-tile [colspan]="2">
            <md-select placeholder="3.7 - Tipo de telefone" formControlName="representative_phone_type">
              <md-option *ngFor="let phone of phoneType" [value]="phone.value">{{phone.description}}</md-option>
            </md-select>
          </md-grid-tile>

          <md-grid-tile [colspan]="2" 
          *ngIf="signupForm.controls['representative_phone_type'].value">
            <md-input-container style="width: 90px; margin-right: 5px;">
              <input mdInput type="text" placeholder="3.7.1 - DDD" formControlName="representative_phone_ddd">
            </md-input-container>
            <md-input-container style="width: 110px;">
              <input mdInput type="text" placeholder="3.7.2 - Número" formControlName="representative_phone_number">
            </md-input-container>            
            <a md-mini-fab *ngIf="signupForm.controls['representative_phone_ddd'].value && signupForm.controls['representative_phone_number'].value" (click)="createRepresentativePhoneObject()">
              <md-icon color="primary">add</md-icon>
            </a>
          </md-grid-tile>
          <!--Representative phone: end -->
          
          <md-grid-tile [colspan]="2">
            <md-input-container>
              <input mdInput type="text" placeholder="3.8 - E-mail"
              formControlName="representative_email">
            </md-input-container>
          </md-grid-tile>
        </md-grid-list>

        <md-grid-list cols="8" rowHeight="100px">
          <md-grid-tile [colspan]="2">
            <md-input-container>
              <input mdInput type="text"
              formControlName="representative_postal_code"
              (change)="republicaVirtualCepToRepresentative($event)"
              placeholder="3.9 - CEP"
              [textMask]="{mask: mask.zip}">
            </md-input-container>
          </md-grid-tile>

          <md-grid-tile [colspan]="3">
            <md-input-container>
              <input mdInput type="text"
              formControlName="representative_address"
              placeholder="3.10 - Logradouro">
            </md-input-container>
          </md-grid-tile>

          <md-grid-tile [colspan]="2">
            <md-input-container>
              <input mdInput type="text"
              formControlName="representative_city"
              placeholder="3.11 - Cidade">
            </md-input-container>
          </md-grid-tile>

          <md-grid-tile [colspan]="1">
            <md-input-container>
              <input mdInput type="text"
              formControlName="representative_state"
              placeholder="3.12 - UF">
            </md-input-container>
          </md-grid-tile>
        </md-grid-list>

        <div *ngIf="signupForm.controls['representative_treatment'].value &&
        signupForm.controls['representative_cpf'].value && 
        signupForm.controls['representative_name'].value && 
        signupForm.controls['representative_position'].value && 
        signupForm.controls['representative_birthday'].value &&
        signupForm.controls['representative_schooling'].value && 
        signupForm.controls['representative_email'].value && 
        signupForm.controls['representative_postal_code'].value && 
        signupForm.controls['representative_address'].value &&
        signupForm.controls['representative_city'].value &&
        signupForm.controls['representative_state'].value">
          <a md-raised-button color="primary" (click)="createRepresentativeObject()">Adicionar Representantes</a>
        </div>

        <div *ngIf="representativePhoneObject.length > 0"> 
          <md-chip-list>  
            <span *ngFor="let representativePhone of representativePhoneObject; let i = index;" class="contact-phone-list">
              <md-chip>
                <span class="fs10 mr5">({{representativePhone.ddd}}){{representativePhone.number}}</span>
                <span (click)="clearRepresentativePhone(i)"><md-icon class="fs10">clear</md-icon></span>
              </md-chip>              
            </span>
          </md-chip-list>
        </div>

        <div *ngIf="representativeObject.length > 0"> 
          <md-chip-list>  
            <span *ngFor="let representative of representativeObject; let i = index;">
              <md-chip>
                <span class="fs10 mr5">{{representative.cpf}}</span>
                <span (click)="clearRepresentative(i)"><md-icon class="fs10">clear</md-icon></span>
              </md-chip>              
            </span>
          </md-chip-list>
        </div>
      </md-tab>

      <md-tab label="Atividade" *ngIf="companyBusiness">
        <md-grid-list cols="8" rowHeight="100px">
          <md-grid-tile [colspan]="2">
            <md-select placeholder="4.1 - Ramos de Atividade" formControlName="group_id"
            (change)="onChangeSubgroup($event)"
            multiple>
              <md-option *ngFor="let group of groups" [value]="group.id">{{group.name}}</md-option>
            </md-select>
          </md-grid-tile>

          <md-grid-tile [colspan]="2" *ngIf="subgroupChanged">
            <md-select placeholder="4.2 - Setor" formControlName="subgroup_id"
            (change)="filterProduct($event)"
            multiple>
              <md-option *ngFor="let subgroup of subgroups" [value]="subgroup.id">{{subgroup.name}}</md-option>
            </md-select>
          </md-grid-tile>

          <md-grid-tile [colspan]="2" *ngIf="productObject">
            <md-select placeholder="4.3 - Produtos" formControlName="product_id"
            multiple>
              <md-option *ngFor="let product of productObject" [value]="product.id">{{product.name}}</md-option>
            </md-select>
          </md-grid-tile>
        </md-grid-list>

        <md-grid-list cols="8" rowHeight="100px">
          <md-grid-tile [colspan]="6">
            <md-input-container>
              <textarea mdInput placeholder="4.4 - Capacidade de Venda (Exportação) / Mês (Unidades)"
              formControlName="sales_capacity">
              </textarea>
            </md-input-container>
          </md-grid-tile>
        </md-grid-list>
      </md-tab>

      <md-tab label="Interesses" *ngIf="companyBusiness">
         <md-grid-list cols="8" rowHeight="100px">
          <md-grid-tile [colspan]="4">
            <md-input-container>
              <textarea mdInput placeholder="5.1 - Eventos nacionais/internacionais que sua empresa participou" 
              formControlName="participation_events">
              </textarea>
            </md-input-container>
          </md-grid-tile>

          <md-grid-tile [colspan]="4">
            <md-input-container>
              <textarea mdInput placeholder="5.2 - Interesses da empresa / Observações"
              formControlName="company_interests">
              </textarea>
            </md-input-container>
          </md-grid-tile>
         </md-grid-list>

         <md-grid-list cols="8" rowHeight="100px">
          <md-grid-tile [colspan]="3">
            <md-input-container>
              <input mdInput type="text"
              placeholder="5.3 - % de faturamento de vendas locais"
              (keyup)="onChangeRepresentativeLocalRevenues($event)">
            </md-input-container>

            <a md-mini-fab *ngIf="createRepresentativeLocalRevenuesObjectButton" (click)="createLocalRevenuesObject()">
              <md-icon color="primary">add</md-icon>
            </a>
          </md-grid-tile>

          <md-grid-tile [colspan]="2">
            <md-select placeholder="5.4 - Outros estados"
            (change)="onChangeStatesBusiness($event)">
              <md-option *ngFor="let state of states" [value]="state.description">{{state.description}}</md-option>
            </md-select>
          </md-grid-tile>

          <md-grid-tile [colspan]="3">
            <md-input-container>
              <input mdInput type="text" [disabled]="statesBusinessChanged == undefined"
              placeholder="5.4.1 - % de faturamento"
              (keyup)="onChangeRepresentativeOtherStateRevenues($event)">
            </md-input-container>

            <a md-mini-fab *ngIf="createRepresentativeOtherStateRevenuesObjectButton" (click)="createOtherStateRevenuesObject()">
              <md-icon color="primary">add</md-icon>
            </a>
          </md-grid-tile>
         </md-grid-list>

         <md-grid-list cols="8" rowHeight="100px">
          <md-grid-tile [colspan]="2">
            <md-input-container>
              <input mdInput placeholder="5.5 - Outros países" 
              [mdAutocomplete]="auto" 
              formControlName="revenues_country"
              (keyup)="filterCountries($event)">
            </md-input-container>

            <md-autocomplete #auto="mdAutocomplete">
              <md-option *ngFor="let country of filteredCountries" [value]="country.country_name_pt">
                {{country.country_name_pt}}
              </md-option>
            </md-autocomplete>

            <!--<md-select placeholder="5.5 - Outros países"
            (change)="onChangeCountriesBusiness($event)">
              <md-option *ngFor="let country of countries" [value]="country.country_name_pt">{{country.country_name_pt}}</md-option>
            </md-select>-->
          </md-grid-tile>

          <md-grid-tile [colspan]="3">
            <md-input-container>
              <input mdInput type="text" [disabled]="countriesBusinessChanged == undefined"
              placeholder="5.5.1 - % de faturamento"
              (keyup)="onChangeRepresentativeOtherCountryRevenues($event)">
            </md-input-container>

            <a md-mini-fab *ngIf="createRepresentativeOtherCountryRevenuesObjectButton" (click)="createOtherCountryRevenuesObject()">
              <md-icon color="primary">add</md-icon>
            </a>
          </md-grid-tile>
         </md-grid-list>

         <md-grid-list cols="8" *ngIf="representativeRevenuesObject.length > 0">
          <div *ngFor="let revenue of representativeRevenuesObject">
            {{revenue.place}}
          </div> 
           <!--<md-table #table [dataSource]="representativeRevenuesObject">
            <ng-container cdkColumnDef="place_type">
              <md-header-cell *cdkHeaderCellDef> Tipo de lugar </md-header-cell>
              <md-cell *cdkCellDef="let row"> {{row.place_type}} </md-cell>
            </ng-container>

            <ng-container cdkColumnDef="place">
              <md-header-cell *cdkHeaderCellDef> Nome </md-header-cell>
              <md-cell *cdkCellDef="let row"> {{row.place}} </md-cell>
            </ng-container>

            <ng-container cdkColumnDef="revenues">
              <md-header-cell *cdkHeaderCellDef> Faturamento </md-header-cell>
              <md-cell *cdkCellDef="let row"> {{row.revenues}} </md-cell>
            </ng-container>
           </md-table>-->
         </md-grid-list>
      </md-tab>
      <!--Vendedor: end-->
    </md-tab-group>
  </form>
</md-card>